<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="stylesheets/stylesheet.css" media="screen"/>
  <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="javascripts/script.js"></script>

  <title>Works Well</title>
  <meta name="description" content="">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">Works Well</h1>
    </header>
    <div id="container">
      <p class="tagline"></p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/himaenshu" class="code">View Works Well on GitHub</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
          <h3>
<a name="how-to-extend-ruby-on-rails-web-application-to-mobile-browser" class="anchor" href="#how-to-extend-ruby-on-rails-web-application-to-mobile-browser"><span class="octicon octicon-link"></span></a>How to extend Ruby on Rails web application to mobile browser?</h3>

<p>The proposed architecture is only relevant to a Ruby on Rails web application to be extended to mobile web browsers. This approach is focused on having different HTML views for different mobile and includes code snippets to override the default template behavior.</p>

<ol>
<li><p>Create a MobileController class and all mobile specific controllers should inherit this class.</p></li>
<li><p>Use "mobile" as a namespace for controllers, views and helpers</p></li>
<li><p>Use additional namespace in parallel to "mobile" to define templates for blackberry (as "bb") and iphone (as "iphone")  </p></li>
<li><p>Create a module in library file (say /lib/mobile_behavior.rb) and define below methods in it to identify user agent from request and to define layout based on device:</p></li>
</ol>
<pre><code>
def blackberry?
	request.user_agent =~ /BlackBerry/
end

def iphone?
    request.user_agent =~ /iPhone/
end

def mobile_layout
	if blackberry?
		"blackberry"
	elsif iphone?
		"iphone"
	else
		"mobile"
	end
end
</code></pre>
<ol>
<li>Add below method definition to library file (mobile_behavior.rb) to override the default method and specify default template based on device:</li>
</ol>
<pre><code>
def default_template_name(action_name = self.action_name)
	if action_name
		action_name = action_name.to_s
		if action_name.include?('/') && template_path_includes_controller?(action_name)
			action_name = strip_out_controller(action_name)
		end
	end
	if blackberry?
		iphone_controller_path = self.controller_path.gsub(“/mobile/", “/iphone/")
		"#{iphone_controller_path}/#{action_name}"
	elsif blackberry?
		bb_controller_path = self.controller_path.gsub(“/mobile/", “/bb/")
		"#{bb_controller_path}/#{action_name}"
	else
		"#{self.controller_path}/#{action_name}"
	end
 end
</code></pre>
<ol>
<li>Include library file module in MobileController:</li>
</ol><p><code>include  MobileBehavior</code></p>

<ol>
<li>Call layout in MobileController:</li>
</ol><p><code>layout :mobile_layout</code></p>

<ol>
<li><p>Create different layout templates as blackberry, iphone and others (mobile) in /app/views/layouts.</p></li>
<li><p>Write the common Controllers and Helpers for all mobile platforms.</p></li>
<li><p>Create different view templates matching the actions for each mobile platform in the below structure:</p></li>
</ol><pre><code>/app/views/bb/&lt;namespace-mapping-controller&gt;/&lt;template-mapping-action&gt;
/app/views/iphone/&lt;namespace-mapping-controller&gt;/&lt;template-mapping-action&gt;
</code></pre>

<p>We are done.  </p>
        </article>
      </div>
    </div>
    <footer>
      <div class="owner">

      <p><a href="https://github.com/himaenshu" class="avatar"><img src="https://avatars1.githubusercontent.com/u/125638?s=60" width="48" height="48"/></a>View <a href="https://github.com/himaenshu">himaenshu</a> on <a href="https://www.github.com">GitHub</a></p>

      </div>
      <div class="creds">
        <small>This page generated using <a href="http://pages.github.com/">GitHub Pages</a><br/>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/himaenshu/himaenshu.github.io/tarball/master" class="tar">tar</a><a href="https://github.com/himaenshu/himaenshu.github.io/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>

  
</body>
</html>
