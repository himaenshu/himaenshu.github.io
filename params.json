{"name":"Works Well","tagline":"","body":"### How to extend Ruby on Rails web application to mobile browser?\r\nThe proposed architecture is only relevant to a Ruby on Rails web application to be extended to mobile web browsers. This approach is focused on having different HTML views for different mobile and includes code snippets to override the default template behavior.\r\n\r\n\r\n1. Create a MobileController class and all mobile specific controllers should inherit this class.\r\n\r\n2. Use \"mobile\" as a namespace for controllers, views and helpers\r\n\r\n3. Use additional namespace in parallel to \"mobile\" to define templates for blackberry (as \"bb\") and iphone (as \"iphone\")  \r\n\r\n4. Create a module in library file (say /lib/mobile_behavior.rb) and define below methods in it to identify user agent from request and to define layout based on device:\r\n\r\n```\r\ndef blackberry?\r\n    request.user_agent =~ /BlackBerry/\r\nend\r\n\r\ndef iphone?\r\n    request.user_agent =~ /iPhone/\r\nend\r\n\r\ndef mobile_layout\r\n          if blackberry?\r\n                   \"blackberry\"\r\n          elsif iphone?\r\n                   \"iphone\"\r\n          else\r\n                   \"mobile\"\r\n          end\r\nend\r\n```\r\n\r\n5. Add below method definition to library file (mobile_behavior.rb) to override the default method and specify default template based on device:\r\n\r\n```\r\ndef default_template_name(action_name = self.action_name)\r\n    if action_name\r\n      action_name = action_name.to_s\r\n      if action_name.include?('/') && template_path_includes_controller?(action_name)\r\n        action_name = strip_out_controller(action_name)\r\n      end\r\n    end\r\n    if blackberry?\r\n      iphone_controller_path = self.controller_path.gsub(“/mobile/\", “/iphone/\")\r\n      \"#{iphone_controller_path}/#{action_name}\"\r\n    elsif blackberry?\r\n       bb_controller_path = self.controller_path.gsub(“/mobile/\", “/bb/\")\r\n      \"#{bb_controller_path}/#{action_name}\"\r\n    else\r\n      \"#{self.controller_path}/#{action_name}\"\r\n    end\r\n end\r\n```\r\n\r\n6. Include library file module in MobileController:\r\n\r\n`include  MobileBehavior`\r\n\r\n7. Call layout in MobileController:\r\n\r\n`layout :mobile_layout`\r\n\r\n8. Create different layout templates as blackberry, iphone and others (mobile) in /app/views/layouts.\r\n\r\n9. Write the common Controllers and Helpers for all mobile platforms.\r\n\r\n10. Create different view templates matching the actions for each mobile platform in the below structure:\r\n\r\n```\r\n/app/views/bb/<namespace-mapping-controller>/<template-mapping-action>\r\n/app/views/iphone/<namespace-mapping-controller>/<template-mapping-action>\r\n```\r\n\r\nWe are done.  ","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}